<Window x:Class="TrabajoInterfacesFinal.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SteamClone - Proyecto Integrado" Height="720" Width="1200"
        Background="#1b2838" WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <Style x:Key="BotonMenu" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#b8b6b4"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Height" Value="45"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Padding" Value="15,0,0,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}">
                            <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Left"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3d4450"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="BotonVerde" TargetType="Button">
            <Setter Property="Background" Value="#5c7e10"/>
            <Setter Property="Foreground" Value="#d2efa9"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="2">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#76a113"/>
                </Trigger>
            </Style.Triggers>
        </Style>

    </Window.Resources>

    <Grid>
        <Grid x:Name="Grid_Login" Visibility="Visible" Panel.ZIndex="10" Background="#1b2838">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Width="320">
                <TextBlock Text="INICIAR SESIÓN" Foreground="White" FontSize="28" FontWeight="Bold" Margin="0,0,0,30"/>

                <TextBlock Text="USUARIO" Foreground="#1999ff" FontWeight="Bold" FontSize="12"/>
                <TextBox x:Name="txtUserLogin" Height="35" Margin="0,5,0,15" Background="#323f53" Foreground="White" BorderThickness="0" Padding="5"/>

                <TextBlock Text="CONTRASEÑA" Foreground="#1999ff" FontWeight="Bold" FontSize="12"/>
                <PasswordBox x:Name="txtPassLogin" Height="35" Margin="0,5,0,25" Background="#323f53" Foreground="White" BorderThickness="0" Padding="5"/>

                <Button Content="ENTRAR" Click="BtnLogin_Click" Height="45" Style="{StaticResource BotonVerde}"/>

                <TextBlock x:Name="lblErrorLogin" Foreground="#c44343" Margin="0,15,0,0" HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>


        <Grid x:Name="Grid_Aplicacion" Visibility="Collapsed">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="220"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Background="#171a21">
                <StackPanel>
                    <TextBlock Text="TIKTOK SHOP" Foreground="White" FontSize="20" FontWeight="Bold" Margin="20,30,0,30"/>

                    <Button Content="TIENDA" Click="Nav_Tienda_Click" Style="{StaticResource BotonMenu}"/>
                    <Button x:Name="btnMenuCarrito" Click="Nav_Carrito_Click" Style="{StaticResource BotonMenu}" Foreground="#66c0f4" ToolTip="Ver Carrito de Compra">
                        <Viewbox Width="26" Height="26" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Path Fill="#66c0f4" Data="M17,18C15.89,18 15,18.89 15,20A2,2 0 0,0 17,22A2,2 0 0,0 19,20C19,18.89 18.1,18 17,18M1,2V4H3L6.6,11.59L5.24,14.04C5.09,14.32 5,14.65 5,15A2,2 0 0,0 7,17H19V15H7.42A0.25,0.25 0 0,1 7.17,14.75C7.17,14.7 7.18,14.66 7.2,14.63L8.1,13H15.55C16.3,13 16.96,12.58 17.3,11.97L21.16,4.96L21.16,4.96C21.27,4.76 21.17,4.5 20.96,4.4A0.26,0.26 0 0,0 20.78,4.37H5.21L4.27,2M7,18C5.89,18 5,18.89 5,20A2,2 0 0,0 7,22A2,2 0 0,0 9,20C9,18.89 8.1,18 7,18Z"/>
                        </Viewbox>
                    </Button>
                    <Button Content="BIBLIOTECA" Click="Nav_Biblioteca_Click" Style="{StaticResource BotonMenu}"/>
                    <Button Content="MI PERFIL" Click="Nav_Perfil_Click" Style="{StaticResource BotonMenu}"/>

                    <StackPanel Margin="20,40,0,0">
                        <TextBlock x:Name="txtUsuarioMenu" Text="Usuario" Foreground="#66c0f4" FontWeight="Bold"/>
                        <TextBlock x:Name="txtSaldoMenu" Text="Cartera: 100.00€" Foreground="#a3b3c1" Margin="0,5,0,0"/>
                    </StackPanel>

                    <Button Content="Cerrar Sesión" Click="BtnLogout_Click" Margin="20,20,20,0" Height="30" Background="#2a3f5a" Foreground="White" BorderThickness="0"/>
                </StackPanel>
            </Border>

            <Grid Grid.Column="1" Background="#1b2838">

                <Grid x:Name="Grid_Tienda" Visibility="Visible" Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                        <TextBox x:Name="txtBuscador" Width="250" Height="35" Background="#223a50" Foreground="White" BorderThickness="0" VerticalContentAlignment="Center" Padding="10,0" TextChanged="TxtBuscador_TextChanged"/>
                        <TextBlock Text="🔍" VerticalAlignment="Center" Foreground="Gray" Margin="-30,0,20,0" IsHitTestVisible="False"/>
                        <ComboBox x:Name="cmbFiltroGenero" Width="180" Height="35" Background="#223a50" Foreground="Black" VerticalContentAlignment="Center" SelectionChanged="CmbFiltroGenero_SelectionChanged">
                            <ComboBoxItem Content="Todos los géneros" IsSelected="True"/>
                            <ComboBoxItem Content="Acción"/>
                            <ComboBoxItem Content="RPG"/>
                            <ComboBoxItem Content="Aventura"/>
                            <ComboBoxItem Content="Deportes"/>
                            <ComboBoxItem Content="Estrategia"/>
                        </ComboBox>
                    </StackPanel>

                    <ScrollViewer Grid.Row="1">
                        <WrapPanel x:Name="PanelJuegos" Orientation="Horizontal"/>
                    </ScrollViewer>
                </Grid>


                <Grid x:Name="Grid_Detalle" Visibility="Collapsed" Margin="30">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0" Margin="0,0,20,0">
                        <Button Content="&lt; VOLVER A TIENDA" Click="Nav_Tienda_Click" Background="Transparent" Foreground="#66c0f4" BorderThickness="0" HorizontalAlignment="Left" Margin="0,0,0,20"/>
                        <TextBlock x:Name="txtDetalleTitulo" Text="TITULO JUEGO" FontSize="36" Foreground="White" FontWeight="Bold"/>
                        <Border Height="300" Background="Black" Margin="0,20">
                            <TextBlock Text="IMAGEN DEL JUEGO" Foreground="Gray" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Border>
                        <TextBlock Text="Descripción detallada del juego..." Foreground="#acb2b8" TextWrapping="Wrap"/>

                        <StackPanel x:Name="panelEstrellasDetalle" Orientation="Horizontal" Margin="0,6,0,0">
                            <Button Content="★" FontSize="18" Padding="0" Margin="0,0,2,0"
                                    Background="Transparent" BorderThickness="0"
                                    Click="Star_Click" Tag="1">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Foreground" Value="Gray"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="1">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="2">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="3">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="4">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="5">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>
                            <Button Content="★" FontSize="18" Padding="0" Margin="0,0,2,0"
                                    Background="Transparent" BorderThickness="0"
                                    Click="Star_Click" Tag="2">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Foreground" Value="Gray"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="2">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="3">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="4">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="5">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>
                            <Button Content="★" FontSize="18" Padding="0" Margin="0,0,2,0"
                                    Background="Transparent" BorderThickness="0"
                                    Click="Star_Click" Tag="3">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Foreground" Value="Gray"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="3">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="4">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="5">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>
                            <Button Content="★" FontSize="18" Padding="0" Margin="0,0,2,0"
                                    Background="Transparent" BorderThickness="0"
                                    Click="Star_Click" Tag="4">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Foreground" Value="Gray"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="4">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="5">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>
                            <Button Content="★" FontSize="18" Padding="0"
                                    Background="Transparent" BorderThickness="0"
                                    Click="Star_Click" Tag="5">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Foreground" Value="Gray"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Valoracion}" Value="5">
                                                <Setter Property="Foreground" Value="Gold"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </StackPanel>
                    </StackPanel>
                    <Border Grid.Column="1" Background="#14171e" Padding="20" Height="200" VerticalAlignment="Top">
                        <StackPanel>
                            <TextBlock Text="Comprar" Foreground="White" FontSize="20"/>
                            <TextBlock x:Name="txtDetallePrecio" Text="00.00€" Foreground="White" FontSize="16" Margin="0,10"/>
                            <Button Content="AÑADIR AL CARRO" Click="BtnComprar_Click" Height="40" Style="{StaticResource BotonVerde}"/>
                        </StackPanel>
                    </Border>
                </Grid>


                <Grid x:Name="Grid_Carrito" Visibility="Collapsed" Margin="30">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="300"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="TU CARRO" FontSize="28" Foreground="White" Margin="0,0,0,20"/>
                        <ListBox x:Name="listaCarrito" Background="#161920" Foreground="White" Height="400" BorderThickness="0">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid Width="400">
                                        <TextBlock Text="{Binding Titulo}" Foreground="White" FontSize="14" HorizontalAlignment="Left"/>
                                        <TextBlock Text="{Binding Precio, StringFormat={}{0}€}" Foreground="#66c0f4" FontSize="14" HorizontalAlignment="Right"/>
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                        <Button Content="Eliminar Seleccionado" Click="BtnEliminarCarrito_Click" Background="#c94f4f" Foreground="White" Width="150" Height="30" HorizontalAlignment="Left" Margin="0,10,0,0"/>
                    </StackPanel>
                    <Border Grid.Column="1" Background="#14171e" Padding="20" Height="200" VerticalAlignment="Top">
                        <StackPanel>
                            <DockPanel Margin="0,0,0,20">
                                <TextBlock Text="Total estimado:" Foreground="White" FontWeight="Bold"/>
                                <TextBlock x:Name="txtTotalCarrito" Text="0.00€" DockPanel.Dock="Right" Foreground="White" FontWeight="Bold"/>
                            </DockPanel>
                            <Button Content="PAGAR AHORA" Click="BtnPagarCarrito_Click" Height="45" Style="{StaticResource BotonVerde}"/>
                        </StackPanel>
                    </Border>
                </Grid>


                <Grid x:Name="Grid_Biblioteca" Visibility="Collapsed" Margin="30">
                    <StackPanel>
                        <TextBlock Text="MIS JUEGOS" FontSize="28" Foreground="White" Margin="0,0,0,20"/>
                        <ListView x:Name="listaBiblioteca"
          Background="#16202D"
          BorderThickness="0"
          HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch"
          ItemsSource="{Binding}">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="#232F3E" 
                    CornerRadius="8" 
                    Margin="0,0,0,15" 
                    Padding="10"
                    BorderBrush="#3A4A5A"
                    BorderThickness="1">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Grid.Column="0">
                                                <Border Width="60" Height="60" Background="Black" CornerRadius="5" Margin="0,0,15,0"/>
                                                <StackPanel>
                                                    <TextBlock Text="{Binding Titulo}" 
                                       Foreground="White" 
                                       FontWeight="Bold" 
                                       FontSize="16"/>
                                                    <TextBlock Text="{Binding Genero}" 
                                       Foreground="#7FC7A3" 
                                       FontSize="12" 
                                       Margin="0,2,0,0"/>
                                                    <TextBlock Text="{Binding Precio, StringFormat={}{0}€}" 
                                       Foreground="#FFD700" 
                                       FontSize="14" 
                                       Margin="0,2,0,0"/>
                                                    <!-- Estrellas de valoración SIN CONVERSOR -->
                                                    <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                                                        <Button Content="★" FontSize="18" Padding="0" Margin="0,0,2,0"
                                        Background="Transparent" BorderThickness="0"
                                        Click="Star_Click" Tag="1">
                                                        </Button>
                                                        <Button Content="★" FontSize="18" Padding="0" Margin="0,0,2,0"
                                        Background="Transparent" BorderThickness="0"
                                        Click="Star_Click" Tag="2">
                                                        </Button>
                                                        <Button Content="★" FontSize="18" Padding="0" Margin="0,0,2,0"
                                        Background="Transparent" BorderThickness="0"
                                        Click="Star_Click" Tag="3">
                                                        </Button>
                                                        <Button Content="★" FontSize="18" Padding="0" Margin="0,0,2,0"
                                        Background="Transparent" BorderThickness="0"
                                        Click="Star_Click" Tag="4">
                                                        </Button>
                                                        <Button Content="★" FontSize="18" Padding="0"
                                        Background="Transparent" BorderThickness="0"
                                        Click="Star_Click" Tag="5">
                                                        </Button>
                                                    </StackPanel>
                                                </StackPanel>
                                            </StackPanel>
                                            <Button Content="JUGAR"
                            Grid.Column="1"
                            Padding="18,6"
                            Margin="20,0,0,0"
                            Background="#5c7e10"
                            Foreground="#d2efa9"
                            FontWeight="Bold"
                            BorderThickness="0"
                            Cursor="Hand"
                            VerticalAlignment="Center"
                            Click="BtnJugarBiblioteca_Click"/>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </StackPanel>
                </Grid>


                <Grid x:Name="Grid_Perfil" Visibility="Collapsed" Margin="30">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Margin="0,0,20,0">
                        <TextBlock Text="MI CUENTA" FontSize="28" Foreground="White" Margin="0,0,0,30"/>

                        <TextBlock Text="Nombre de Perfil" Foreground="#66c0f4" FontWeight="Bold"/>
                        <TextBox x:Name="txtEditUser" Background="#2a3f5a" Foreground="White" Height="35" Margin="0,5,0,20" BorderThickness="0" Padding="5"/>

                        <TextBlock Text="Correo Electrónico" Foreground="#66c0f4" FontWeight="Bold"/>
                        <TextBox Text="usuario@ejemplo.com" Background="#2a3f5a" Foreground="White" Height="35" Margin="0,5,0,20" BorderThickness="0" Padding="5"/>

                        <Button Content="Guardar Cambios" Width="150" Height="40" HorizontalAlignment="Left" Style="{StaticResource BotonVerde}" Click="BtnGuardarPerfil_Click"/>
                    </StackPanel>

                    <Border Grid.Column="1" Background="#14171e" CornerRadius="5" Padding="20">
                        <StackPanel>
                            <TextBlock Text="GESTIÓN DE SALDO" FontSize="22" Foreground="White" Margin="0,0,0,20"/>

                            <Border Background="#2a475e" Padding="15" CornerRadius="3" Margin="0,0,0,20">
                                <DockPanel>
                                    <TextBlock Text="Saldo Actual:" Foreground="#c7d5e0" FontSize="16" VerticalAlignment="Center"/>
                                    <TextBlock x:Name="lblSaldoPerfil" Text="100,00€" DockPanel.Dock="Right" Foreground="#66c0f4" FontSize="24" FontWeight="Bold"/>
                                </DockPanel>
                            </Border>

                            <TextBlock Text="AÑADIR FONDOS" Foreground="White" FontWeight="Bold" Margin="0,0,0,10"/>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                <TextBox x:Name="txtCantidadRecarga" Width="100" Height="35" FontSize="16" VerticalContentAlignment="Center" Background="#000" Foreground="White" BorderThickness="1" BorderBrush="Gray" Text="10" Padding="5"/>
                                <TextBlock Text="€" Foreground="White" FontSize="18" VerticalAlignment="Center" Margin="5,0,15,0"/>

                                <ComboBox x:Name="cmbMetodosGuardados" Width="200" Height="35" Background="#2a3f5a" Foreground="Black"/>
                            </StackPanel>
                            <Button Content="+ Ingresar Dinero" Click="BtnIngresarDinero_Click" Background="#2a475e" Foreground="White" Height="35" Margin="0,0,0,30"/>

                            <Separator Background="#3d4450" Margin="0,10,0,20"/>

                            <TextBlock Text="AÑADIR NUEVO MÉTODO DE PAGO" Foreground="White" FontWeight="Bold" Margin="0,0,0,10"/>

                            <TextBlock Text="Tipo:" Foreground="Gray" Margin="0,5,0,0"/>
                            <ComboBox x:Name="cmbTipoNuevo" Height="30" Margin="0,0,0,10" Foreground="Black">
                                <ComboBoxItem Content="Tarjeta de Crédito/Débito" IsSelected="True"/>
                                <ComboBoxItem Content="Google Pay"/>
                                <ComboBoxItem Content="Tarjeta Prepago (Game/Steam)"/>
                            </ComboBox>

                            <TextBlock Text="Número / ID / Código:" Foreground="Gray" Margin="0,5,0,0"/>
                            <TextBox x:Name="txtDatoNuevo" Background="#2a3f5a" Foreground="White" Height="30" BorderThickness="0" Margin="0,0,0,15"/>

                            <Button Content="Guardar Método" Click="BtnGuardarMetodo_Click" Background="#3d4450" Foreground="White" Height="30"/>

                            <TextBlock Text="Métodos guardados:" Foreground="Gray" Margin="0,15,0,5"/>
                            <ListBox x:Name="listaMetodosVisual" Height="80" Background="#000000" Foreground="Gray" BorderThickness="0"/>

                        </StackPanel>
                    </Border>
                </Grid>

            </Grid>
        </Grid>
    </Grid>
</Window>